---
title: Създаване на тайни
description: Научете как да създавате и извличате тайни с помощта на Onetime Secret REST API с поддръжка на автентикирано и анонимно използване.
---

_Актуализирано 2025-04-02_

:::бележка
**Избор на местоположение на данните и регион**
- Изберете между центрове за данни в САЩ ([`us.onetimesecret.com`](https://us.onetimesecret.com/)) или ЕС ([`eu.onetimesecret.com`](https://eu.onetimesecret.com/))
- Вземете предвид фактори като суверенитет на данните, латентност и изисквания за съответствие
- **ЗАБЕЛЕЖКА:** По подразбиране `onetimesecret.com` продължава да функционира и да насочва към активен център за данни, като се препоръчва използването на конкретно местоположение, тъй като тази функционалност може да бъде премахната в бъдеще.
:::


## Създаване на тайна

`POST https://REGION.onetimesecret.com/api/v1/share`

Използвайте тази крайна точка, за да съхраните секретна стойност и да създадете връзка за еднократно използване.


### Удостоверена заявка

```bash
$ curl -X POST -u 'USERNAME:APITOKEN' -d 'secret=SECRET&ttl=NUMBER_IN_SECONDS' https://us.onetimesecret.com/api/v1/share
```

### Анонимна заявка

```bash
$ curl -X POST -d 'secret=SECRET&ttl=3600' https://us.onetimesecret.com/api/v1/share
```

### Параметри на заявката

- **secret**: тайната стойност, която се криптира, преди да бъде съхранена. Има максимална дължина в зависимост от вашия план, която се прилага (1k-10k).
- **пасфраза**: низ, който получателят трябва да знае, за да види тайната. Тази стойност също се използва за криптиране на тайната и се bcrypted преди да бъде съхранена, така че ние имаме тази стойност само при пренос.
- **ttl**: максималният период от време в секунди, който тайната трябва да издържи (т.е. време до живот). След като това време изтече, тайната ще бъде изтрита и няма да може да бъде възстановена.
- **получател**: имейл адрес. Ще изпратим приятелски имейл, съдържащ връзката към тайната (НЕ самата тайна).
- **домейн за споделяне**: потребителският домейн, който да се използва при генерирането на тайната връзка. Ако не е предоставен, се използва домейнът по подразбиране (напр. eu.onetimesecret.com).

### Атрибути

- **custid**: потребителското име на акаунта, който е създал тайната. Тази стойност ще бъде `anon` за анонимни заявки.
- **metadata\_key**: уникалният ключ за метаданните. НЕ го споделяйте.
- **secret\_key**: уникалният ключ за създадената тайна. Това е ключ, който можете да споделяте.
- **ttl**: Времето до края на живота (в секунди), което е посочено (т.е. не оставащото време).
- **metadata\_ttl**: Оставащото време (в секунди), което остава на метаданните.
- **secret\_ttl**: Оставащото време (в секунди), което остава на тайната.
- **получател**: ако е посочен получател, това е замаскирана версия на имейл адреса.
- **създаден**: Време, в което тайната е създадена в уникс време (UTC).
- **актуализирана**: същото, но времето на последната актуализация.
- **пасфраза\_задължителна**: Ако при създаването на тайната е била предоставена парола, това ще бъде вярно. В противен случай очевидно е false.
- **share_domain**: потребителският домейн, който да се използва при генерирането на тайната връзка. В противен случай "".


### Примерен отговор:

```json
{
  "custid": "USERNAME",
  "metadata_key": "qjpjroeit8wra0ojeyhcw5pjsgwtuq7",
  "secret_key":"153l8vbwqx5taskp92pf05uvgjefvu9",
  "ttl": "3600",
  "share_domain": "",
  "updated":"1324174006",
  "created":"1324174006"
}
```

## Генериране на тайна

`POST https://REGION.onetimesecret.com/api/v1/generate`

Генерирайте кратка, уникална тайна. Това е полезно за временни пароли, подложки Onetime, соли и др.

### Удостоверена заявка

```bash
$ curl -X POST -u 'USERNAME:APITOKEN' -d 'ttl=NUMBER_IN_SECONDS' https://us.onetimesecret.com/api/v1/generate
```

### Анонимна заявка

```bash
$ curl -X POST -d 'ttl=3600' https://us.onetimesecret.com/api/v1/generate
```


```json
{
  "custid": "USERNAME",
  "value":"3Rg8R2sfD3?a",
  "metadata_key": "2b6bjmudhmtiqjn2qmdaqjkqxp323gi",
  "secret_key": "pgcdv7org3vtdurif809sygnt0mstw6",
  "ttl": "3600",
  "share_domain": "",
  "updated":"1324174095",
  "created":"1324174095"
}
```

### Атрибути

Същото като при "Споделяне на тайна" по-горе, но с добавяне на полето `стойност`.
