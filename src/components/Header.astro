<!-- src/components/Header.astro -->
---
import { getRelativeLocaleUrl } from 'astro:i18n';
---

<header class="sticky top-0 z-40 w-full border-b dark:border-gray-800 border-gray-200 bg-white/90 dark:bg-gray-900/90 backdrop-blur">
  <div class="container mx-auto px-4 max-w-6xl">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center">
          <img src="/src/assets/img/onetime-logo-v3-xs.png" alt="Onetime Secret" class="h-8">
          <span class="ml-2 text-xl font-brand font-medium hidden sm:block dark:text-white text-gray-900">Onetime Secret</span>
        </a>
      </div>

      <!-- Navigation -->
      <nav class="hidden md:flex items-center space-x-6">
        <a href={getRelativeLocaleUrl('en', 'introduction')} class="text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">Docs</a>
        <a href={getRelativeLocaleUrl('en', 'custom-domains')} class="text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">Custom Domains</a>
        <a href={getRelativeLocaleUrl('en', 'rest-api')} class="text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">API</a>
        <a href="https://github.com/onetimesecret/onetimesecret" class="text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">GitHub</a>
      </nav>

      <!-- Right controls -->
      <div class="flex items-center space-x-4">
        <!-- Language selector - use Starlight component -->
        <starlight-lang-select>
          <select>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="fr_FR">Fran√ßais</option>
            <option value="nl">Nederlands</option>
          </select>
        </starlight-lang-select>

        <!-- Theme toggle - use Starlight component -->
        <starlight-theme-select>
          <select>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
            <option value="auto">Auto</option>
          </select>
        </starlight-theme-select>

        <!-- Mobile menu button - only shown on mobile -->
        <button type="button" id="mobile-menu-button" class="md:hidden inline-flex items-center justify-center rounded-md p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800">
          <span class="sr-only">Open main menu</span>
          <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile menu - hidden by default -->
  <div class="md:hidden hidden" id="mobile-menu">
    <div class="space-y-1 px-4 py-2 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800">
      <a href={getRelativeLocaleUrl('en', 'introduction')} class="block py-2 text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">Docs</a>
      <a href={getRelativeLocaleUrl('en', 'custom-domains')} class="block py-2 text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">Custom Domains</a>
      <a href={getRelativeLocaleUrl('en', 'rest-api')} class="block py-2 text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">API</a>
      <a href="https://github.com/onetimesecret/onetimesecret" class="block py-2 text-gray-700 dark:text-gray-300 hover:text-brand-500 font-medium">GitHub</a>
    </div>
  </div>
</header>

<script>
  // Toggle mobile menu
  document.getElementById('mobile-menu-button')?.addEventListener('click', () => {
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileMenu?.classList.contains('hidden')) {
      mobileMenu.classList.remove('hidden');
    } else {
      mobileMenu?.classList.add('hidden');
    }
  });
</script>
